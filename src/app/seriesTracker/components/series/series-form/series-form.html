<form
  class="series"
  [ngClass]="{
    even: even(),
    odd: !even(),
    'was-validated': wasValidated
  }"
  [formGroup]="seriesForm"
  (ngSubmit)="onSaveSeries()"
>
  <div class="field field--form">
    <label>Name:</label>
    <div class="error">
      <input
        class="form-control field__data"
        type="text"
        formControlName="name"
        required
      />
      <p class="error">{{ error }}</p>
    </div>
  </div>
  <series-names
    [seriesNames]="namesValues"
    (namesValues)="namesValues = $event"
  ></series-names>
  <div class="field field--form">
    Type
    <select class="form-select field__data" formControlName="type">
      <option value="">Choose type</option>
      @for(name of typeList | async;track name){
      <option [value]="name">{{ name }}</option>
      }
    </select>
  </div>
  <div class="field field--form">
    Genre
    <select class="form-select field__data" formControlName="genre">
      <option value="">Choose genre</option>
      @for(name of genreList | async;track name){
      <option [value]="name">{{ name }}</option>
      }
    </select>
  </div>
  <div class="field field--form">
    Animation
    <select class="form-select field__data" formControlName="animation">
      <option value="">Choose animation</option>
      @for(name of animationList | async;track name){
      <option [value]="name">{{ name }}</option>
      }
    </select>
  </div>
  <div class="field field--form">
    <label>Season:</label>
    <input
      class="form-control field__data"
      type="number"
      min="0"
      formControlName="season"
    />
  </div>
  <div class="field field--form">
    <label>Episode:</label>
    <input
      class="form-control field__data"
      type="number"
      min="0"
      formControlName="episode"
    />
  </div>

  <div class="field field--form">
    <label>Watched:</label>
    <select class="form-select field__data" formControlName="watched">
      <option value="true">true</option>
      <option value="false">false</option>
    </select>
  </div>
  <div class="field field--form form-check form-switch">
    <label>WatchTime:</label>
    <input
      type="checkbox"
      class="form-check-input field__data"
      formControlName="watchTimeActive"
    />
  </div>
  <series-watchtime
    [form]="watchTimeForm"
    [showWatchTime]="seriesForm.get('watchTimeActive')?.value"
  ></series-watchtime>

  <div class="field field--form">
    <div>tags:</div>
    <add-tag [tagNames]="tagNames" (addNewTag)="tagNames = $event"></add-tag>
  </div>
  <div class="series__tags">
    @for(tagName of tagNames; track tagName){
    <tag
      [tagName]="tagName"
      [changeMode]="true"
      (tagRemoved)="removeTag($event)"
    ></tag>
    }
  </div>
  <div class="series__buttons">
    <input
      type="button"
      class="btn btn-danger"
      (click)="delete()"
      value=" Delete"
    />
    <input
      type="button"
      class="btn btn-secondary"
      (click)="closeForm.emit()"
      value="Cancel"
    />
    <input type="submit" class="btn btn-success" value="Save" />
  </div>
</form>
