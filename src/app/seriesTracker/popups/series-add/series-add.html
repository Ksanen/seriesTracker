<form
  [ngClass]="{
    form: true,
    'form--show': show(),
    'was-validated': wasValidated,
  }"
  [formGroup]="seriesForm"
  (ngSubmit)="onSubmit()"
  novalidate
>
  <div class="form__field form__field--default">
    <label>Main name</label>
    <div>
      <input class="form-control" type="text" formControlName="name" required />
      <div class="error">{{ error }}</div>
    </div>
  </div>
  <series-names
    [seriesNames]="namesValues"
    (namesValues)="namesValues = $event"
  ></series-names>

  <div class="form__field form__field--default">
    <label>Type</label>
    <select class="form-select" formControlName="type">
      <option value="">Choose type</option>
      @for(name of typeList | async;track name){
      <option [value]="name">{{ name }}</option>
      }
    </select>
  </div>
  <div class="form__field">
    <label>Genre</label>
    <select class="form-select" formControlName="genre">
      <option value="">Choose genre</option>
      @for(name of genreList | async;track name){
      <option [value]="name">{{ name }}</option>
      }
    </select>
  </div>
  <div class="form__field">
    <label>Animation</label>
    <select class="form-select" formControlName="animation">
      <option value="">Choose animation</option>
      @for(name of animationList | async;track name){
      <option [value]="name">{{ name }}</option>
      }
    </select>
  </div>
  <div class="form__field">
    <label>Season: </label
    ><input
      class="form-control"
      min="0"
      type="number"
      formControlName="season"
    />
  </div>
  <div class="form__field">
    <label>Episode: </label
    ><input
      class="form-control"
      min="0"
      type="number"
      formControlName="episode"
    />
  </div>
  <div class="form__field">
    <label>Watched: </label>
    <select class="form-select" formControlName="watched">
      <option value="0">false</option>
      <option value="1">true</option>
    </select>
  </div>
  <div class="form__field form-switch">
    <label>WatchTime: </label>
    <input
      class="form-check-input"
      type="checkbox"
      formControlName="watchTimeActive"
    />
  </div>
  <series-watchtime
    [form]="watchTimeGroup"
    [showWatchTime]="seriesForm.get('watchTimeActive')?.value"
  ></series-watchtime>
  @if(show()){
  <div class="form__field form__field--right">
    <add-tag [tagNames]="tagNames" (addNewTag)="tagNames = $event"></add-tag>
  </div>
  }

  <div class="form__field">
    @if(tagNames.length>0){
    <div>tags:</div>
    }

    <div class="form__field__tags">
      @for(tagName of tagNames;track tagName){
      <tag
        [changeMode]="true"
        [tagName]="tagName"
        (tagRemoved)="removeTag($event)"
      ></tag>
      }
    </div>
  </div>
  <div class="form__buttons">
    <input
      type="button"
      class="btn btn-danger"
      value="close"
      (click)="close()"
    />
    <input class="btn btn-success" type="submit" value="add" />
  </div>
</form>
